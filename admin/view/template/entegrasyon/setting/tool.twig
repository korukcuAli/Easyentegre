{{ header }}{{ column_left }}

<div id="content">
    <div class="page-header">

        <div class="container-fluid">
            <ul class="breadcrumb">
                {% for breadcrumb in breadcrumbs %}
                    <li><a href="{{ breadcrumb.href }}">{{ breadcrumb.text }}</a></li>
                {% endfor %}
            </ul>
            <div class="pull-right easy-mode {{ easy_visibility }}">
                <img src="view/image/entegrasyon/logo.png" />
            </div>
        </div>
    </div>
    <div class="container-fluid"> {% if success %}
            <div class="alert alert-success alert-dismissible"><i class="fa fa-check-circle"></i> {{ success }}
                <button type="button" class="close" data-dismiss="alert">&times;</button>
            </div>
        {% endif %}
        {% if error %}
            {% for error_message in error %}
                <div class="alert alert-danger alert-dismissible"><i class="fa fa-exclamation-circle"></i> {{ error_message }}</div>
            {% endfor %}
        {% endif %}

        <style>
            .tool{
                margin: 20px;
            }
            .tool_title{
                padding-top: 5px;
            }
        </style>

        <div class="row well " >


            <div class="col-sm-1">
                <img class="img-responsive" src="view/image/entegrasyon/bilgi.png"/>
            </div>
            <div class="col-sm-10">
                <h3 style="color:#27ad5e;font-weight: bolder ">Bilgilendirme</h3>
                <p> <h3 >Aşağıda yapacağınız işlemler, Kalıcı olarak işleneceği için kullanırken dikkatli olmanızı öneririz.</h3></b></p>

            </div>
        </div>
        <br>

        <div class="panel panel-default" style="border-top: 2px solid #27ad5e;">



            <div class="panel-heading">

                <h3 class="panel-title"><i class="fa fa-wrench" style="margin-bottom: 10px" ></i> Araçlar {{ variant_reset }}</h3>
                <a href="index.php?route=entegrasyon/setting/tool&{{ token_link }}"> <button data-toggle="tooltip" title="Sayfa Yenile" class="pull-right btn btn-warning"> <i class="fa fa-refresh" aria-hidden="true"></i> </button></a>

                <!--   <a href="index.php?route=entegrasyon/setting/tool_history_list&{{ token_link }}"> <button data-toggle="tooltip" title="Geçmiş İşlemler" style="margin-right: 10px" class="pull-right btn btn-info " > <i  class="fa fa-clock-o"></i></button></a>-->
            </div>

            <div class="panel-body">




                <div class="tool">
                    <div class="accordion" id="accordionExample">
                        <div class="card ">
                            <div class="card-header" id="update">
                                <h2 class="mb-0">
                                    <button type="button" style="width: 100%" class="btn " data-toggle="collapse" data-target="#collapse_update" aria-expanded="false" aria-controls="collapseExample" ><h2 class="tool_title" >Entegrasyon Güncelleme</h2></button>
                                </h2>
                            </div>
                            <div class="collapse" id="collapse_update">
                                <table class="table ">
                                    <tr><td class="ayarbilgi"><p class="lead"> Son kararlı sürümü tekrar yüklemek ister misiniz ?</p>(<small class="text-primary">Mevcut Ayarlarınız Değişmez.</small>)</td><td class="ayareylem"> <a class="btn btn-primary btn-block btn-lg" href="index.php?route=entegrasyon/setting/updater&mode=again&{{ token_link }}">Son sürümü yükle</a></td></tr>

                                </table>

                            </div>

                        </div>

                    </div>

                    <div class="card">
                        <div class="card-header" id="urun">
                            <h2 class="mb-0">
                                <button type="button" style="width: 100%" class="btn " data-toggle="collapse" data-target="#collapse_product" aria-expanded="false" aria-controls="collapseExample" ><h2 class="tool_title" >Ürün İşlemleri</h2></button>
                            </h2>
                        </div>
                        <div class="collapse" id="collapse_product">
                            <table class="table ">
                                <tr class="hidden"><td  ><p class="lead">Toplu Ürün Güncelle </p> (<small class="text-primary"> Hızlı ve yeni Sistem ile ürünlerinizi toplu günceleyin</small>)</td>
                                    <td>

                                        <button class="btn btn-primary  btn-block btn-lg" id="bulk_update_basic" type="button" > Toplu Güncelle </button>



                                    </td></tr>
                                <tr><td class="ayarbilgi" ><p class="lead"> Tüm varyantları yeniden oluşturmak ister misiniz ?</p>(<small class="text-primary">Dikkat:Varyantlarınız için belirlediğiniz barkodlar ve varyant görselleri silinir.</small>)</td><td class="ayareylem"> <a class="btn btn-primary btn-block btn-lg varyant_yenile" >Varyantları Yenile</a></td></tr>
                                <tr><td class="ayarbilgi"><p class="lead"> Tüm ürün ayarlarını sıfırlamak istermisiniz ?</p>(<small class="text-primary">Dikkat:ürünleriniz için pazaryerine özel belirlediğiniz komisyon,para birimi vs tüm ayarlar silinir. Seçtiğiniz pazaryerine göre tüm ayarları sıfırlayabilirsiniz</small>)</td><td class="ayareylem"> <a class="btn btn-primary btn-block btn-lg product_setting_delete" >Sıfırla</a></td></tr>

                            </table>

                        </div>

                    </div>


                    <div class="card ">
                        <div class="card-header" id="kategori">
                            <h2 class="mb-0">
                                <button type="button" style="width: 100%" class="btn " data-toggle="collapse" data-target="#collapse_category" aria-expanded="false" aria-controls="collapseExample" ><h2 class="tool_title" >Kategori İşlemleri</h2></button>
                            </h2>
                        </div>
                        <div class="collapse" id="collapse_category">
                            <table class="table ">
                                <tr><td class="ayarbilgi"><p class="lead"> Tüm kategori ayarlarını sıfırlamak istermisiniz ?</p>(<small class="text-primary">Dikkat:ürünleriniz için pazaryerine özel belirlediğiniz komisyon,para birimi vs tüm ayarlar silinir. Seçtiğiniz pazaryerine göre tüm ayarları sıfırlayabilirsiniz</small>)</td><td class="ayareylem"> <a class="btn btn-primary btn-block btn-lg category_setting_delete" >Sıfırla</a></td></tr>

                            </table>

                        </div>

                    </div>

                    <div class="card ">
                        <div class="card-header" id="marka">
                            <h2 class="mb-0">
                                <button type="button" style="width: 100%" class="btn " data-toggle="collapse" data-target="#collapse_marka" aria-expanded="false" aria-controls="collapseExample" ><h2 class="tool_title" >Üretici İşlemleri</h2></button>
                            </h2>
                        </div>
                        <div class="collapse" id="collapse_marka">
                            <table class="table ">
                                <tr><td class="ayarbilgi"><p class="lead"> Tüm marka ayarlarını sıfırlamak istermisiniz ?</p>(<small class="text-primary">Dikkat:ürünleriniz için pazaryerine özel belirlediğiniz komisyon,para birimi vs tüm ayarlar silinir. Seçtiğiniz pazaryerine göre tüm ayarları sıfırlayabilirsiniz</small>)</td><td class="ayareylem"> <a class="btn btn-primary btn-block btn-lg manufacturer_setting_delete " >Sıfırla</a></td></tr>

                            </table>

                        </div>

                    </div>

                    <div class="card ">
                        <div class="card-header" id="image">
                            <h2 class="mb-0">
                                <button type="button" style="width: 100%" class="btn " data-toggle="collapse" data-target="#collapse_image" aria-expanded="false" aria-controls="collapseExample" ><h2 class="tool_title" >Ürün Görsel İşlemleri</h2></button>
                            </h2>
                        </div>
                        <div class="collapse" id="collapse_image">
                            <table class="table ">
                                <tr><td class="ayarbilgi"><p class="lead"> Tüm ürün görsellerini onarmak istermisiniz ?</p>(<small class="text-primary">Birçok pazaryeri ürün görsel linklerinde boşluk ve özel karakter kabul etmemektedir. Görsel onarıcı tüm görselerinizi onarırı ve veritabında günceller. <span class="text-danger"> Dikkat: Bu işlemin geri dönüşü yoktur. her ihtimale karşı onarma işleme başlamadan önce ürün görsellerinin ve veritabanının yedeğini alınız!</span></small>)</td><td class="ayareylem"> <button class="btn btn-primary btn-block btn-lg btn_image_repair" data-loading-text="<i class='fa fa-circle-o-notch fa-spin'></i> Optimize Ediliyor..." >Tüm Görselleri Onar</button></td></tr>

                            </table>

                        </div>

                    </div>

                    <div class="card ">
                        <div class="card-header" id="log_k">
                            <h2 class="mb-0">
                                <button type="button" style="width: 100%" class="btn " data-toggle="collapse" data-target="#collapse_log_k" aria-expanded="false" aria-controls="collapseExample" ><h2 class="tool_title" >Log Kayıtları</h2></button>
                            </h2>
                        </div>
                        <div class="collapse" id="collapse_log_k">
                            <table class="table ">
                                <tr><td class="ayarbilgi"><p class="lead"> Entegrasyon'da Gerçekleşen Olayların Log Kayıtları</p>(<small class="text-primary">Entegrasyon'da gerçekleşen, otomatik ve manuel bütün işlemleri detayları ile görebilirsiniz.</small>)</td><td class="ayareylem"> <a href="{{ domain }}/index.php?route=entegrasyon/update/logs" target="_blank" class="btn btn-primary btn-block btn-lg setting_log " >Log Kayıtları</a></td></tr>

                            </table>

                        </div>

                    </div>

                </div>
            </div>
        </div>

    </div>
</div>
</div>


{{ footer }}


<script>
    $( "#bulk_update_basic" ).click(function() {





        BootstrapDialog.show({
            title: 'Hızlı Toplu Güncelleme',
            closable: true,
            size: BootstrapDialog.SIZE_WIDE,

            message: function (dialog) {
                var $message = $('<div></div>');
                var pageToLoad = dialog.getData('pageToLoad');
                $message.load(pageToLoad);
                return $message;
            },
            data: {

                'pageToLoad': 'index.php?route=entegrasyon/setting/fast_update_bulk&{{ token_link }}'
            }
        });


    })

</script>

<script>
    $( ".varyant_yenile" ).click(function() {


        Swal.mixin({
            input: 'text',
            confirmButtonText: 'Kabul Ediyorum ',
            cancelButtonText: 'Hayır',
            showCancelButton: true,
        }).queue([
            {
                title: 'Varyantları Yenilemek İçin "Evet" Yazın.',
                text:'Barkodlar ve varyant görselleri silinir.'
            },
        ]).then((result) => {
            if (result.value) {
                var answer = JSON.stringify(result.value).toLowerCase();

                if (answer == '["evet"]'){
                    Swal.close();



                    $.post("index.php?route=entegrasyon/setting/updatedbforProductVariants&{{ token_link }}", {

                    }, function (donenVeri) {



                        Swal.fire({
                            position: 'top-end',
                            icon: 'success',
                            title: 'Varyantlar Yenilendi.',
                            showConfirmButton: false,
                            timer: 1500
                        })
                        /*$.post("index.php?route=entegrasyon/setting/add_tool_history&{{ token_link }}", {
                            code:'Genel',
                            do:'Varyantlar Yenilendi',
                            tool_category:'Ürün İşlemleri'
                        }, function (donenVeri) {

                        });*/


                    });
                }else{
                    Swal.fire({
                        position: 'top-end',
                        icon: 'warning',
                        title: 'Giriş Kabul Edilmedi',
                        showConfirmButton: false,
                        timer: 1500
                    })
                }
            }





        })

    })

    $('.btn_image_repair').on('click',function (event){


        var thisbutton=$(this);



        Swal.mixin({
            input: 'text',
            confirmButtonText: 'Kabul Ediyorum ',
            cancelButtonText: 'Hayır',
            showCancelButton: true,
        }).queue([
            {
                title: 'Ürün Görsellerini Optimize Etmek için  "Evet" Yazın.',
                text: 'Tüm ürün ana ve ek görsellerindeki boşluk ve özel karakterler onarılır.'

            },
        ]).then((result) => {
            if (result.value) {
                var answer = JSON.stringify(result.value).toLowerCase();

                if (answer == '["evet"]'){
                    thisbutton.button('loading');

                    Swal.close();

                    $.post("index.php?route=entegrasyon/setting/optimize_all_images&{{ token_link }}", {

                    }, function (donenVeri) {

                        thisbutton.button('reset');

                        Swal.fire('Başarılı',donenVeri['message'],'success')


                    },'JSON');
                }else{
                    Swal.fire({
                        position: 'top-end',
                        icon: 'warning',
                        title: 'Giriş Kabul Edilmedi',
                        showConfirmButton: false,
                        timer: 1500
                    })
                }
            }





        })


    })

</script>

<script>



    $( ".product_setting_delete" ).click(function() {

        Swal.fire({
            title: '<span style="color:#27ad5e">Hangi Pazaryerinin Ürün Ayarları Sıfırlansın?<?</span>',
            html: "" +
                "<br>" +
                ' {% for marketplace in marketplaces %}\n' +
                '\n' +
                '                             <div class="btn-group-">   {% if marketplace.status %}<button id="{{ marketplace.code }}" type="button"  class="btn btn-block  btn-lg btnDelSet "><img class="pull-left" src="{{ marketplace.logo }}"> <strong style="    display: block;\n' +
                '    margin-top: 10px;">{{ marketplace.name }} </strong></button><br>{% endif %}\n' +
                '\n' +
                '                            {% endfor %}</div>'+""+' <div class="btn-group-"> <button id="all" type="button"  class="btn btn-block  btn-lg btnDelSet "><img class="pull-left"   src="https://www.easyentegre.com/image/catalog/resim_2021-02-08_144906.png"> <strong style="    display: block;\n' +
                '    margin-top: 10px;">Tümü</strong></button><br>\n ',

            showCancelButton: false,
            showConfirmButton: false
        });







        $(document).on('click','.btnDelSet',function () {


            Swal.mixin({
                input: 'text',
                confirmButtonText: 'Kabul Ediyorum ',
                cancelButtonText: 'Hayır',
                showCancelButton: true,
            }).queue([
                {
                    title: 'Ürün Ayarlarını Silmek İçin "Evet" Yazın.',
                    text: 'Pazaryerine özel belirlediğiniz komisyon, para birimi gibi tüm ayarlar silinir.'
                },
            ]).then((result) => {
                if (result.value) {
                    var answer = JSON.stringify(result.value).toLowerCase();

                    if (answer == '["evet"]'){
                        Swal.close();
                        var code =$(this).attr('id');
                        var marketname = "";
                        if (code == "ty"){
                            marketname = "Trendyol"
                        }if (code == "hb"){
                            marketname = "HepsiBurada"
                        }if (code == "cs"){
                            marketname = "Çiçek Sepeti"
                        }if (code == "gg"){
                            marketname = "GittiGidiyor"
                        }if (code == "eptt"){
                            marketname = "Eptt Avm"
                        }if (code == "n11"){
                            marketname = "N11"
                        }if (code == "all"){
                            marketname = "Tümü"
                        }

                        $.post("index.php?route=entegrasyon/setting/product_setting_delete&{{ token_link }}", {
                            code:code
                        }, function (donenVeri) {


                            Swal.fire({
                                position: 'top-end',
                                icon: 'success',
                                title: 'Ürün Ayarları Sıfırlandı.('+marketname+')',
                                showConfirmButton: false,
                                timer: 1500
                            })
                            /*   $.post("index.php?route=entegrasyon/setting/add_tool_history&{{ token_link }}", {
                            code:marketname,
                            do:'Ürün Ayarları Sıfırlandı',
                            tool_category:'Ürün İşlemleri'
                        }, function (donenVeri) {

                        });*/

                        });
                    }else{
                        Swal.fire({
                            position: 'top-end',
                            icon: 'warning',
                            title: 'Giriş Kabul Edilmedi',
                            showConfirmButton: false,
                            timer: 1500
                        })
                    }
                }




            })











        });
    });
</script>

<script>



    $( ".manufacturer_setting_delete" ).click(function() {

        Swal.fire({
            title: '<span style="color:#27ad5e">Hangi Pazaryerinin Ürün Ayarları Sıfırlansın?<?</span>',
            html: "" +
                "<br>" +
                ' {% for marketplace in marketplaces %}\n' +
                '\n' +
                '                             <div class="btn-group-">   {% if marketplace.status %}<button id="{{ marketplace.code }}" type="button"  class="btn btn-block  btn-lg btnDelSet "><img class="pull-left" src="{{ marketplace.logo }}"> <strong style="    display: block;\n' +
                '    margin-top: 10px;">{{ marketplace.name }} </strong></button><br>{% endif %}\n' +
                '\n' +
                '                            {% endfor %}</div>'+""+' <div class="btn-group-"> <button id="all" type="button"  class="btn btn-block  btn-lg btnDelSet "><img class="pull-left"   src="https://www.easyentegre.com/image/catalog/resim_2021-02-08_144906.png"> <strong style="    display: block;\n' +
                '    margin-top: 10px;">Tümü</strong></button><br>\n ',

            showCancelButton: false,
            showConfirmButton: false
        });




        $(document).on('click','.btnDelSet',function () {


            Swal.mixin({
                input: 'text',
                confirmButtonText: 'Kabul Ediyorum ',
                cancelButtonText: 'Hayır',
                showCancelButton: true,
            }).queue([
                {
                    title: 'Marka Ayarlarını Silmek İçin "Evet" Yazın.',
                    text: 'Pazaryerine özel belirlediğiniz komisyon, para birimi gibi tüm ayarlar silinir.'
                },
            ]).then((result) => {
                if (result.value) {
                    var answer = JSON.stringify(result.value).toLowerCase();

                    if (answer == '["evet"]'){
                        Swal.close();
                        var code =$(this).attr('id');
                        var marketname = "";
                        if (code == "ty"){
                            marketname = "Trendyol"
                        }if (code == "hb"){
                            marketname = "HepsiBurada"
                        }if (code == "cs"){
                            marketname = "Çiçek Sepeti"
                        }if (code == "gg"){
                            marketname = "GittiGidiyor"
                        }if (code == "eptt"){
                            marketname = "Eptt Avm"
                        }if (code == "n11"){
                            marketname = "N11"
                        }if (code == "all"){
                            marketname = "Tümü"
                        }

                        $.post("index.php?route=entegrasyon/setting/manufacturer_setting_delete&{{ token_link }}", {
                            code:code
                        }, function (donenVeri) {


                            Swal.fire({
                                position: 'top-end',
                                icon: 'success',
                                title: 'Marka Ayarları Sıfırlandı.('+marketname+')',
                                showConfirmButton: false,
                                timer: 1500
                            })
                            /*     $.post("index.php?route=entegrasyon/setting/add_tool_history&{{ token_link }}", {
                            code:marketname,
                            do:'Marka Ayarları Sıfırlandı',
                            tool_category:'Üretici İşlemleri'
                        }, function (donenVeri) {

                        });
*/
                        });
                    }else{
                        Swal.fire({
                            position: 'top-end',
                            icon: 'warning',
                            title: 'Giriş Kabul Edilmedi',
                            showConfirmButton: false,
                            timer: 1500
                        })
                    }
                }




            })











        });
    });
</script>
<script>



    $( ".category_setting_delete" ).click(function() {

        Swal.fire({
            title: '<span style="color:#27ad5e">Hangi Pazaryerinin Ürün Ayarları Sıfırlansın?<?</span>',
            html: "" +
                "<br>" +
                ' {% for marketplace in marketplaces %}\n' +
                '\n' +
                '                             <div class="btn-group-">   {% if marketplace.status %}<button id="{{ marketplace.code }}" type="button"  class="btn btn-block  btn-lg btnDelSet "><img class="pull-left" src="{{ marketplace.logo }}"> <strong style="    display: block;\n' +
                '    margin-top: 10px;">{{ marketplace.name }} </strong></button><br>{% endif %}\n' +
                '\n' +
                '                            {% endfor %}</div>'+""+' <div class="btn-group-"> <button id="all" type="button"  class="btn btn-block  btn-lg btnDelSet "><img class="pull-left"   src="https://www.easyentegre.com/image/catalog/resim_2021-02-08_144906.png"> <strong style="    display: block;\n' +
                '    margin-top: 10px;">Tümü</strong></button><br>\n ',

            showCancelButton: false,
            showConfirmButton: false
        });



        $(document).on('click','.btnDelSet',function () {


            Swal.mixin({
                input: 'text',
                confirmButtonText: 'Kabul Ediyorum ',
                cancelButtonText: 'Hayır',
                showCancelButton: true,
            }).queue([
                {
                    title: 'Kategori Ayarlarını Silmek İçin "Evet" Yazın.',
                    text: 'Pazaryerine özel belirlediğiniz komisyon, para birimi gibi tüm ayarlar silinir.'
                },
            ]).then((result) => {
                if (result.value) {
                    var answer = JSON.stringify(result.value).toLowerCase();

                    if (answer == '["evet"]'){
                        Swal.close();
                        var code =$(this).attr('id');
                        var marketname = "";
                        if (code == "ty"){
                            marketname = "Trendyol"
                        }if (code == "hb"){
                            marketname = "HepsiBurada"
                        }if (code == "cs"){
                            marketname = "Çiçek Sepeti"
                        }if (code == "gg"){
                            marketname = "GittiGidiyor"
                        }if (code == "eptt"){
                            marketname = "Eptt Avm"
                        }if (code == "n11"){
                            marketname = "N11"
                        }if (code == "all"){
                            marketname = "Tümü"
                        }

                        $.post("index.php?route=entegrasyon/setting/category_setting_delete&{{ token_link }}", {
                            code:code
                        }, function (donenVeri) {


                            Swal.fire({
                                position: 'top-end',
                                icon: 'success',
                                title: 'Kategori Ayarları Sıfırlandı.('+marketname+')',
                                showConfirmButton: false,
                                timer: 1500
                            })
                            /*     $.post("index.php?route=entegrasyon/setting/add_tool_history&{{ token_link }}", {
                         code:marketname,
                            do:'Kategori Ayarları Sıfırlandı',
                            tool_category:'Kategori İşlemleri'
                        }, function (donenVeri) {

                        });
*/

                        });
                    }else{
                        Swal.fire({
                            position: 'top-end',
                            icon: 'warning',
                            title: 'Giriş Kabul Edilmedi',
                            showConfirmButton: false,
                            timer: 1500
                        })
                    }
                }




            })











        });
    });

</script>